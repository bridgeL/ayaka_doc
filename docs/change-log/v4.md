# v4 - 正在使用

## 0.4.1 

### API变更

相比0.3.x进行了api的大幅度更换

已过时的API：

- `on_command`
- `on_text`
- `on_state_command`
- `on_state_text`
- `group_storage`
- `plugin_storage`
- `set_state`

新的API：

- `on`
- `storage`

重新将ayaka功能拆分为多个文件，以便后续拓展开发

### 修复app.arg在特定情况下的错误

修复了命令抬头为空字符串时，app.arg错误解析的问题   

## 0.4.2 

1. 增进了app.cache的使用体验，添加了chain方法
2. 优化了app.cache的运行逻辑，不影响使用
3. 大幅修改了`app.storage`的使用方法，现在`app.storage`与`app.cache`有着相似的使用逻辑，降低心智负担
4. 重新添加了`app.set_state`方法

## 0.4.3b0

ayaka内置bot：ayakabot（可作为cqhttp的后端）

现在，即使不安装nonebot，ayaka仍可与cqhttp通信

**可兼容**：所有通过ayaka编写的ayaka衍生插件，都可以在ayakabot和nonebot下使用

**cqhttp**：ayakabot仍然是围绕cqhttp而使用的qq机器人

**配置**：配置cqhttp为反向ws连接，连接地址为 `ws://127.0.0.1:19900/ayakabot`


